<div class="center-item" *ngIf="loading">
  <mat-spinner></mat-spinner>
</div>
<ng-container *ngIf="!loading">
  <form [formGroup]="task">
    <div class="mb-3 row">
      <label for="task_title" class="col-sm-2 col-form-label">Titulo:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="task_title" formControlName="title"
               [value]="task.get('title')?.value">
      </div>
    </div>
    <div class="mb-3 row">
      <label for="due_date" class="col-sm-2 col-form-label">Fecha Programada:</label>
      <div class="col-sm-10">
        <input type="datetime-local" class="form-control" id="due_date" formControlName="due_date"
               [value]="task.get('due_date')?.value">
      </div>
    </div>
    <div class="mb-3 row">
      <label for="numeric_reference" class="col-sm-2 col-form-label">Observación numérica:</label>
      <div class="col-sm-10">
        <input digitOnly type="text" class="form-control" id="numeric_reference" formControlName="numeric_reference"
               [value]="task.get('numeric_reference')?.value">
      </div>
    </div>
    <div class="mb-3 row">
      <label for="observation" class="col-sm-2 col-form-label">Observaciones:</label>
      <div class="col-sm-10">
        <textarea class="form-control no-resize" id="observation" rows="5" formControlName="observation"
                  [value]="task.get('observation')?.value"></textarea>
      </div>
    </div>
    <div class="w-100">
      <label for="observation" class="col-sm-2 col-form-label">Tipo de tarea:</label>
      <select class="form-select" formControlName="type" aria-label="Seleccione un tipo de tarea">
        <option selected>Seleccione un tipo de tarea</option>
        <option *ngFor="let type of types" [selected]="task.get('type')?.value == type">{{type}}</option>
      </select>
    </div>
  </form>
  <hr>
  <div class="d-flex justify-content-between">
    <span class="footer-info">{{task.get('user_id')?.value}}</span>
    <span class="footer-info">{{task.get('creation_date')?.value | date:'dd/MM/yyyy HH:mm'}}</span>
  </div>

  <mat-dialog-actions align="end">
    <button mat-raised-button mat-dialog-close class="btn-outline-danger">Cancel</button>
    <button mat-raised-button *ngIf="task.disabled" (click)="enableForm()" class="btn-outline-primary">Editar</button>
    <button mat-raised-button *ngIf="task.enabled" class="btn-outline-primary"
            (click)="updateTask(task,task.get('id')?.value)">Guardar
    </button>
  </mat-dialog-actions>
</ng-container>
